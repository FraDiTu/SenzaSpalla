<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.catring.controller.MenuController">
   <top>
      <VBox spacing="10.0">
         <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
         </padding>
         <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" 
                text="Cat &amp; Ring - Dimostrazione Pattern GRASP e GoF" />
         <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" 
                text="Pattern utilizzati: Controller, Creator, Information Expert, Singleton, Observer" />
         <Separator />
      </VBox>
   </top>
   
   <center>
      <TabPane>
         <!-- TAB 1: PATTERN GRASP - CONTROLLER -->
         <Tab text="Controller (GRASP)" closable="false">
            <VBox spacing="10.0">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               
               <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" 
                      text="PATTERN GRASP: CONTROLLER - Gestione Eventi e Menu" />
               
               <HBox spacing="10.0">
                  <Button fx:id="consultaEventoButton" onAction="#handleConsultaEvento" 
                          text="Consulta Eventi" style="-fx-background-color: #4CAF50;" />
               </HBox>
               
               <HBox spacing="10.0">
                  <VBox spacing="5.0" prefWidth="300.0">
                     <Label style="-fx-font-weight: bold;" text="Lista Eventi" />
                     <ListView fx:id="eventiListView" prefHeight="200.0" />
                  </VBox>
                  
                  <VBox spacing="5.0">
                     <Label style="-fx-font-weight: bold;" text="Dettagli Evento (Information Expert)" />
                     <TextArea fx:id="dettagliEventoArea" prefHeight="200.0" editable="false" />
                  </VBox>
               </HBox>
            </VBox>
         </Tab>
         
         <!-- TAB 2: PATTERN CREATOR + SINGLETON -->
         <Tab text="Creator + Singleton" closable="false">
            <HBox spacing="10.0">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               
               <!-- Pannello sinistro: Creator pattern -->
               <VBox spacing="10.0" prefWidth="400.0">
                  <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" 
                         text="PATTERN GRASP: CREATOR - Creazione Oggetti" />
                  
                  <Label style="-fx-font-weight: bold;" text="Crea Nuovo Menu (via MenuCreator)" />
                  
                  <GridPane hgap="10.0" vgap="10.0">
                     <columnConstraints>
                        <ColumnConstraints hgrow="NEVER" minWidth="80.0" />
                        <ColumnConstraints hgrow="ALWAYS" />
                     </columnConstraints>
                     
                     <Label text="Nome:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                     <TextField fx:id="nomeMenuField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                     
                     <Label text="Descrizione:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                     <TextField fx:id="descrizioneMenuField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                     
                     <Label text="Note:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                     <TextArea fx:id="noteMenuArea" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                  </GridPane>
                  
                  <HBox spacing="5.0">
                     <Button fx:id="creaMenuButton" onAction="#handleCreaMenu" 
                             text="Crea Menu (Creator)" style="-fx-background-color: #2196F3;" />
                     <Button fx:id="selezionaMenuButton" onAction="#handleSelezionaMenu" 
                             text="Dettagli Menu" />
                  </HBox>
                  
                  <Separator />
                  
                  <!-- Gestione sezioni -->
                  <Label style="-fx-font-weight: bold;" text="Gestione Sezioni (Creator)" />
                  
                  <HBox spacing="10.0">
                     <TextField fx:id="titoloSezioneField" promptText="Titolo sezione" HBox.hgrow="ALWAYS" />
                     <Button fx:id="aggiungiSezioneButton" onAction="#handleAggiungiSezione" 
                             text="Aggiungi (Creator)" />
                  </HBox>
                  
                  <Separator />
                  
                  <!-- Gestione ricette -->
                  <Label style="-fx-font-weight: bold;" text="Gestione Ricette (Singleton + Creator)" />
                  
                  <VBox spacing="5.0">
                     <ComboBox fx:id="sezioniComboBox" promptText="Seleziona sezione" prefWidth="300.0" />
                     <ComboBox fx:id="ricetteComboBox" promptText="Seleziona ricetta" prefWidth="300.0" />
                     
                     <HBox spacing="5.0">
                        <Button fx:id="aggiungiRicettaButton" onAction="#handleAggiungiRicetta" 
                                text="Aggiungi" />
                        <Button fx:id="eliminaRicettaButton" onAction="#handleEliminaRicetta" 
                                text="Elimina" />
                        <Button fx:id="spostaRicettaButton" onAction="#handleSpostaRicetta" 
                                text="Sposta" />
                     </HBox>
                  </VBox>
               </VBox>
               
               <!-- Pannello centrale: Lista menu (Singleton) -->
               <VBox spacing="10.0" prefWidth="300.0">
                  <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" 
                         text="GOF: SINGLETON - MenuService" />
                  <Label style="-fx-font-size: 11px; -fx-text-fill: #666;" 
                         text="Una sola istanza gestisce tutti i menu" />
                  
                  <TableView fx:id="menuTableView" VBox.vgrow="ALWAYS">
                     <columns>
                        <TableColumn fx:id="nomeMenuColumn" text="Nome" prefWidth="140.0" />
                        <TableColumn fx:id="descrizioneMenuColumn" text="Descrizione" prefWidth="140.0" />
                     </columns>
                  </TableView>
               </VBox>
               
               <!-- Pannello destro: Dettagli menu (Observer) -->
               <VBox spacing="10.0" prefWidth="350.0">
                  <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" 
                         text="GOF: OBSERVER - Aggiornamenti Automatici" />
                  <Label style="-fx-font-size: 11px; -fx-text-fill: #666;" 
                         text="L'interfaccia si aggiorna automaticamente" />
                  
                  <Label text="Sezioni:" />
                  <ListView fx:id="sezioniListView" prefHeight="120.0" />
                  
                  <Label text="Ricette nella sezione selezionata:" />
                  <ListView fx:id="vociListView" prefHeight="120.0" VBox.vgrow="ALWAYS" />
               </VBox>
            </HBox>
         </Tab>
         
         <!-- TAB 3: PATTERN INFORMATION EXPERT -->
         <Tab text="Information Expert" closable="false">
            <VBox spacing="10.0">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               
               <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" 
                      text="PATTERN GRASP: INFORMATION EXPERT - Validazione e ID" />
               
               <HBox spacing="10.0">
                  <Button fx:id="consultaRicettarioButton" onAction="#handleConsultaRicettario" 
                          text="Consulta Ricettario (Singleton)" style="-fx-background-color: #FF9800;" />
               </HBox>
               
               <HBox spacing="10.0">
                  <!-- Creazione ricette con validazione -->
                  <VBox spacing="10.0" prefWidth="400.0">
                     <Label style="-fx-font-weight: bold;" text="Inserisci Nuova Ricetta (Expert Validation)" />
                     
                     <GridPane hgap="10.0" vgap="10.0">
                        <columnConstraints>
                           <ColumnConstraints hgrow="NEVER" minWidth="100.0" />
                           <ColumnConstraints hgrow="ALWAYS" />
                        </columnConstraints>
                        
                        <Label text="Nome:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="nomeRicettaField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        
                        <Label text="Descrizione:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="descrizioneRicettaField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        
                        <Label text="Tempo (min):" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <TextField fx:id="tempoPreparazioneField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        
                        <Label text="Autore:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                        <TextField fx:id="autoreRicettaField" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                        
                        <Label text="Stato:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                        <ComboBox fx:id="statoRicettaComboBox" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                     </GridPane>
                     
                     <Button fx:id="inserisciRicettaButton" onAction="#handleInserisciRicetta" 
                             text="Inserisci Ricetta (Creator + Expert)" style="-fx-background-color: #9C27B0;" />
                     
                     <Label style="-fx-font-size: 11px; -fx-text-fill: #666;" 
                            text="MenuValidator (Expert) valida automaticamente i dati" />
                  </VBox>
                  
                  <!-- Lista ricette esistenti -->
                  <VBox spacing="10.0" HBox.hgrow="ALWAYS">
                     <Label style="-fx-font-weight: bold;" text="Ricette Esistenti (Information Expert)" />
                     <ListView fx:id="ricetteListView" VBox.vgrow="ALWAYS" />
                     <Label style="-fx-font-size: 11px; -fx-text-fill: #666;" 
                            text="IdGenerator (Expert) crea ID univoci automaticamente" />
                  </VBox>
               </HBox>
            </VBox>
         </Tab>
         
         <!-- TAB 4: AZIONI COMPLETE -->
         <Tab text="Azioni Complete" closable="false">
            <VBox spacing="10.0">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               
               <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" 
                      text="FUNZIONALITÀ COMPLETE - Tutti i Pattern in Azione" />
               
               <!-- Modifica menu -->
               <HBox spacing="10.0">
                  <VBox spacing="5.0" prefWidth="400.0">
                     <Label style="-fx-font-weight: bold;" text="Modifica Menu Selezionato" />
                     
                     <HBox spacing="5.0">
                        <TextField fx:id="nuovoTitoloField" promptText="Nuovo titolo" HBox.hgrow="ALWAYS" />
                        <Button fx:id="aggiornaTitoloButton" onAction="#handleAggiornaTitolo" 
                                text="Aggiorna Titolo" />
                     </HBox>
                     
                     <TextArea fx:id="nuoveNoteArea" promptText="Nuove annotazioni" prefRowCount="3" />
                     <Button fx:id="aggiungiAnnotazioneButton" onAction="#handleAggiungiAnnotazione" 
                             text="Aggiungi Annotazioni" />
                  </VBox>
                  
                  <VBox spacing="5.0" prefWidth="300.0">
                     <Label style="-fx-font-weight: bold;" text="Azioni Finali" />
                     
                     <Button fx:id="generaPDFButton" onAction="#handleGeneraPDF" 
                             text="Genera PDF" style="-fx-background-color: #607D8B;" />
                     <Button fx:id="pubblicaBachecaButton" onAction="#handlePubblicaBacheca" 
                             text="Pubblica su Bacheca" style="-fx-background-color: #795548;" />
                     <Button fx:id="eliminaMenuButton" onAction="#handleEliminaMenu" 
                             text="Elimina Menu" style="-fx-background-color: #F44336;" />
                  </VBox>
               </HBox>
               
               <Separator />
               
               <!-- Spiegazione pattern -->
               <VBox spacing="5.0">
                  <Label style="-fx-font-weight: bold;" text="Pattern Utilizzati in questa Applicazione:" />
                  
                  <Label text="• CONTROLLER (GRASP): MenuController coordina tutte le interazioni" />
                  <Label text="• CREATOR (GRASP): MenuCreator è responsabile della creazione di oggetti" />
                  <Label text="• INFORMATION EXPERT (GRASP): IdGenerator e MenuValidator hanno competenze specifiche" />
                  <Label text="• LOW COUPLING &amp; HIGH COHESION (GRASP): Ogni classe ha una responsabilità chiara" />
                  <Label text="• SINGLETON (GoF): MenuService garantisce una sola istanza globale" />
                  <Label text="• OBSERVER (GoF): L'interfaccia si aggiorna automaticamente alle modifiche" />
               </VBox>
            </VBox>
         </Tab>
      </TabPane>
   </center>
   
   <bottom>
      <VBox>
         <Separator />
         <HBox>
            <padding>
               <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
            <Label fx:id="statusLabel" 
                   text="Pattern implementati: Controller, Creator, Information Expert, Singleton, Observer" 
                   style="-fx-font-weight: bold;" />
         </HBox>
      </VBox>
   </bottom>
</BorderPane>
